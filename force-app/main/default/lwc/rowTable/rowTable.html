<template>
    <!-- Outer Table: All accounts, as before -->
    <table class="custom-table">
        <thead>
            <tr>
                <th>Name</th>
                <th>Industry</th>
                <th>Phone</th>
                <th>Type</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <template for:each={accountList} for:item="acc">
                <tr key={acc.Id}>
                    <td>{acc.Name}</td>
                    <td>{acc.Industry}</td>
                    <td>{acc.Phone}</td>
                    <td>{acc.Type}</td>
                    <td>
                        <div class="button-group">
                            <button class="open-btn" 
                                data-id={acc.Id}
                                onclick={handleOpen}>Open</button>
                            <button class="edit-btn" 
                                data-id={acc.Id}
                                onclick={handleEdit} title="Edit">
                                <svg viewBox="0 0 20 20" width="18" height="18" style="vertical-align:middle;">
                                    <path d="M14.85 2.15a1.5 1.5 0 0 1 2.12 2.12l-1.29 1.29-2.12-2.12 1.29-1.29zm-2 2l2.12 2.12-8.47 8.47c-.2.2-.45.34-.72.4l-2.83.71a.5.5 0 0 1-.61-.61l.71-2.83c.06-.27.2-.52.4-.72l8.47-8.47z" fill="#f57c00"/>
                                </svg>
                            </button>
                        </div>
                    </td>
                </tr>
            </template>
        </tbody>
    </table>

    <!-- Modal: Show only selectedAccount details -->
    <template if:true={showModal}>
        <div class="modal-backdrop"></div>
        <section class="modal">
            <header>
                <h2>Account Details</h2>
            </header>
            <div class="modal-content">
                <template if:true={isEditMode}>
                    <!-- Edit Mode: Grid layout with 4 boxes -->
                    <div class="edit-grid">
                        <div class="edit-box">
                            <label>Name</label>
                            <input type="text" value={selectedAccount.Name} onchange={handleFieldChange} data-field="Name"/>
                        </div>
                        <div class="edit-box">
                            <label>Industry</label>
                            <input type="text" value={selectedAccount.Industry} onchange={handleFieldChange} data-field="Industry"/>
                        </div>
                        <div class="edit-box">
                            <label>Phone</label>
                            <input type="text" value={selectedAccount.Phone} onchange={handleFieldChange} data-field="Phone"/>
                        </div>
                        <div class="edit-box">
                            <label>Type</label>
                            <input type="text" value={selectedAccount.Type} onchange={handleFieldChange} data-field="Type"/>
                        </div>
                    </div>
                </template>
                <template if:false={isEditMode}>
                    <!-- View Mode: Table layout -->
                    <div class="modal-table-wrapper">
                        <table class="custom-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Industry</th>
                                    <th>Phone</th>
                                    <th>Type</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>{selectedAccount.Name}</td>
                                    <td>{selectedAccount.Industry}</td>
                                    <td>{selectedAccount.Phone}</td>
                                    <td>{selectedAccount.Type}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </template>
            </div>
            <footer>
                <button class="close-btn" onclick={handleCloseModal}>Close</button>
                <template if:true={isEditMode}>
                    <button class="save-btn" onclick={handleSaveModal}>Save</button>
                </template>
                <template if:false={isEditMode}>
                    <button class="edit-btn-modal" onclick={handleEditInModal}>
                        <svg viewBox="0 0 20 20" width="16" height="16" style="vertical-align:middle;">
                            <path d="M14.85 2.15a1.5 1.5 0 0 1 2.12 2.12l-1.29 1.29-2.12-2.12 1.29-1.29zm-2 2l2.12 2.12-8.47 8.47c-.2.2-.45.34-.72.4l-2.83.71a.5.5 0 0 1-.61-.61l.71-2.83c.06-.27.2-.52.4-.72l8.47-8.47z" fill="#f57c00"/>
                        </svg>
                        Edit
                    </button>
                </template>
            </footer>
        </section>
    </template>
</template>
